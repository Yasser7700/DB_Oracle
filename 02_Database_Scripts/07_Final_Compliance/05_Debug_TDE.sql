/*
================================================================================
    05_Debug_TDE.sql - تشخيص حالة التشفير
    نظام التجارة الإلكترونية الآمن Oracle 19c
================================================================================
    المستخدم المطلوب: SYS AS SYSDBA
================================================================================
*/

SET SERVEROUTPUT ON;

PROMPT ========================================================
PROMPT تشخيص إعدادات التشفير (TDE Diagnostics)
PROMPT ========================================================

PROMPT 1. التحقق من حالة المحفظة (V$ENCRYPTION_WALLET):
SELECT * FROM V$ENCRYPTION_WALLET;

PROMPT ========================================================
PROMPT 2. التحقق من بارامترات النظام (WALLET_ROOT):
SELECT NAME, VALUE FROM V$PARAMETER WHERE NAME = 'wallet_root';

PROMPT ========================================================
PROMPT 3. التحقق من بارامترات التشفير (TDE_CONFIGURATION):
SELECT NAME, VALUE FROM V$PARAMETER WHERE NAME LIKE '%tde%';

PROMPT ========================================================
PROMPT 4. محاولة معرفة مسار TNS_ADMIN (إذا أمكن):
-- قد لا يظهر مباشرة، لكن نتحقق من البيئة
SELECT SYS_CONTEXT('USERENV', 'ORACLE_HOME') AS ORACLE_HOME FROM DUAL;

PROMPT ========================================================
PROMPT نهاية التشخيص.
